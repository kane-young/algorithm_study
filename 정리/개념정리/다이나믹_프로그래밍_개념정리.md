# 다이나믹 프로그래밍

**중복되는 연산을 줄이자**

현실 세계의 여러 문제 중에서 컴퓨터를 활용해도 해결하기 어려운 문제들은 무엇일까? 

최적의 해를 구하기에 `시간이 매우 많이 필요`하거나 `메모리 공간이 매우 많이 필요`한 문제 등이 컴퓨터로도 해결하기 어려운 문제이다. 

메모리 공간을 약간 더 사용하면 연산 속도를 비약적으로 증가시킬 수 있는 방법이 있다. 그것이 바로 `다이나믹 프로그래밍` 이다. `동적 계획법` 이라고도 한다. 먼저 다이나믹 프로그래밍의 기본적인 아이디어를 소개한 뒤에, 다이나믹 프로그래밍의 `2가지 방식(탑다운과 보텀업)`을 설명할 것이다. 특히 다이나믹 프로그래밍을 위해 자주 사용되는 `이모제이션 기법`까지 소개하겠다.

### 피보나치 수열

- **f(n) = f(n-1) + f(n-2)**
- **n번째 피보나치 수 = (n-1)번째 피보나치 수 + (n-2)번째 피보나치**
- **단, 1번째 피보나치 수 = 1,2번째 피보나치 수 = 1**

이를 코드로 나타낸다면?

```swift
import Foundation

func fibo(_ number: Int) -> Int {
  if number == 1 || number == 2 {
    return 1
  } else {
    return fibo(number - 1) + fibo(number - 2)
  }
}
```

f(1), (2) = 1

f(3) = f(2) + f(1)

...

f(6) = f(5) + f(4)

f(6) = f(4) + f(3) + f(3) + f(2)

f(6) = f(3) + f(2) + f(2) + f(1) + f(2) + f(1) + f(2)

f(6) = f(2) + f(1)  + f(2) + f(2) + f(1) + f(2) + f(1) + f(2)

6번째 피보나치의 경우 바로 위 처럼 계산과정을 거치게 된다.

우리는 필요없는 계산과정이 엄청나게 많이 중복되게 발생하는 것을 볼 수 있는데, f(3)의 경우는 무려 3번이나 해당 과정에서 보여진다

이처럼 피보나치 수열의 점화식을 재귀 함수를 사용해 만들 수는 있지만, 단순히 매번 계산하도록 하면 문제를 효율적으로 해결할 수 없다. 이러한 다이나믹 프로그래밍을 사용하면 효율적으로 해결할 수 있다. 다만 항상 다이나믹 프로그래밍을 사용할 수는 없으며, 다음 조건을 만족할 때 사용할 수 있다.

1. **큰 문제를 작은 문제로 나눌 수 있다.**
2. **작은 문제에서 구한 정답은 그것을 포함하는 큰 문제에서도 동일하다**

`메모이제이션(Memoization)` 기법을 사용해서 해결해보자!!

메모이제이션은 다이나믹 프로그래밍을 구현하는 방법 중 한 종류로, 한 번 구한 결과를 메모리 공간에 메모해두고 같은 식을 다시 호출하면 메모한 결과를 그대로 가져오는 기법을 의미한다. `메모이제이션(Memoization)`은 값을 저장하는 방법이므로 `캐싱`(Caching)이라고도 한다.

```swift
import Foundation

var resultArray: [Int] = Array(repeating: 0, count: 10000)

func fibo(_ number: Int) -> Int {
  if number == 1 || number == 2 {
    return 1
  }
  
  if resultArray[number] != 0 {
    return resultArray[number]
  }
  
  resultArray[number] = fibo(number - 1) + fibo(number - 2)
  return resultArray[number]
}

print(fibo(6))
```

근데 이 처럼 재귀함수를 이용해 다이나믹 프로그래밍 소스코드를 작성하는 방법을, `큰 문제를 해결하기 위해 작은 문제를 호출`한다고 하여 `탑다운(Top-Down) 방식`이라고 말한다. 반면에 단순히 `반복문을 이용`하여 소스코드를 작성하는 경우 `작은 문제부터 차근차근 답을 도출`한다고 하여 `바텀업(Bottom-Up) 방식`이라고 말한다.

**단순히 반복문을 이용하여 문제를 해결한 것은 작은 것 부터 수행되기 때문에 바텀업이라고 할 수 있다!!**

```swift
import Foundation

var resultArray: [Int64] = Array(repeating: 0, count: 10000)

resultArray[1] = 1
resultArray[2] = 1
let n = 50

for i in 3...n {
  resultArray[i] = resultArray[i-1] + resultArray[i-2]
}
```

바텀업 방식에서 사용되는 결과 저장용 리스트는 `DP 테이블`이라고 부르며, 메모이제이션은 탑다운 방식에 국한되어 사용되는 표현이다. `다이나믹 프로그래밍`과 `메모이제이션`의 개념을 혼용해서 사용하는 경우도 있는데, 엄밀히 말하면 `**메모이제이션`은 이전에 계산된 결과를 일시적으로 기록해 놓는 넓은 개념**을 의미하므로, **`다이나믹 프로그래밍`과는 별도의 개념이다.**

`메모이제이션`을 배열 예제로 활용해서 풀기도 하였는데 `Dictionary` 또한 상황에 따라 잘 어울린다면 활용할 수 있다.
